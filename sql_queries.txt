CREATE TABLE `friends`.`friendships` (
  `iduser` INT NOT NULL,
  `idfriend` INT NOT NULL,
  INDEX `iduser_idx` (`iduser` ASC),
  INDEX `idfriend_idx` (`idfriend` ASC),
  CONSTRAINT `iduser`
    FOREIGN KEY (`iduser`)
    REFERENCES `friends`.`users` (`iduser`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `idfriend`
    FOREIGN KEY (`idfriend`)
    REFERENCES `friends`.`users` (`iduser`)
    ON DELETE CASCADE
    ON UPDATE CASCADE);


select u.username from users as u where u.iduser in (select idfriend from users as u1, friendships as f where u1.username = 'rady@example.com' and u1.iduser = f.iduser)